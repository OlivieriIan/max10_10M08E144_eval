--------------------------------------------------------------------------------
-- Entity: Blinky
--------------------------------------------------------------------------------
-- Filename     : blinky.vhd
-- Creation date: 15-09-2020
-- Author(s)    : Ian Olivieri
-- Version      : 1.00
-- Description  : 
--------------------------------------------------------------------------------
-- File History:
-- Date       Version   Author            Comment
-- 15-09-2020 1.00      Ian Olivieri      Creation of File
--------------------------------------------------------------------------------

library ieee;
  use ieee.std_logic_1164.all;
  use ieee.numeric_std.all;

entity Blinky is
  port(
    i_CLK   : IN std_logic;
    i_ENA   : IN std_logic;
    o_STATE : out std_logic
  );
end entity;

architecture behavioral of Blinky is
  --- Signals definition ---
  signal s_state : std_logic := '0';
begin
  --- Processes definition ---
  toggle_led : process (i_CLK) is
    -- counts for a blink freq: CLK freq / blink freq * Duty cycle
    constant c_cnt_1hz : natural 25000000; -- CLK = 50MHz, Blink freq = 1Hz, DC = 0.5
    variable cnt :  natural range 0 to c_cnt_1hz := 0;
  begin
    if rising_edge(i_CLK) then
      cnt := cnt + 1;
      if cnt = c_cnt_1hz then
        s_state <= not s_state; -- toggle led output
        cnt     := 0;
      end if;
    end if;
  end process;

  --- IO mappings ---
  o_STATE <= s_state and i_ENA; -- Transfer led state to the output

end architecture;


